<!-- <!DOCTYPE html>
<html>
<head>
  <title>Connplex Stock LED</title>

  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: "Consolas", "Courier New", monospace;
      text-align: center;
    }

    .container {
      padding-top: 30px;
    }

    /* Company Name */
    #symbol {
      font-size: 28px;
      letter-spacing: 2px;
      margin-bottom: 15px;
    }

    /* Price row */
    .price-row {
      display: flex;
      justify-content: center;
      align-items: baseline;
      gap: 20px;
    }

    #price {
      font-size: 56px;
      font-weight: bold;
      color: #00ff66;
    }

    #change {
      font-size: 28px;
      font-weight: bold;
    }

    .up {
      color: #00ff66;
    }

    .down {
      color: #ff3333;
    }

    /* Stats row */
    .stats {
      display: flex;
      justify-content: center;
      gap: 28px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .stat {
      text-align: center;
      min-width: 90px;
    }

    .stat-label {
      font-size: 14px;
      color: #888;
      margin-bottom: 6px;
    }

    .stat-value {
      font-size: 18px;
      color: #00e5ff;
      font-weight: bold;
    }

    #time {
      margin-top: 25px;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>

<body>

<div class="container">

  <div id="symbol">LOADING...</div>

  <div class="price-row">
    <div id="price">₹0.00</div>
    <div id="change">--</div>
  </div>

  <div class="stats">
    <div class="stat"><div class="stat-label">PRE</div><div id="prev" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">OPEN</div><div id="open" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">HIGH</div><div id="high" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">LOW</div><div id="low" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">CLOSE</div><div id="close" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">VWAP</div><div id="vwap" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">NIFTY 50</div><div id="nifty" class="stat-value">--</div></div>
    <div class="stat"><div class="stat-label">SENSEX</div><div id="sensex" class="stat-value">--</div></div>
  </div>

  <div id="time"></div>

</div>

<script>
const API_URL = "https://connplex-activeled.onrender.com/data";

async function loadData() {
  try {
    const res = await fetch(API_URL, { cache: "no-store" });
    if (!res.ok) throw new Error("API error");

    const data = await res.json();
    const s = data.stock;

    document.getElementById("symbol").innerText = s.symbol;

    document.getElementById("price").innerText = "₹" + s.price.toFixed(2);

    const changeEl = document.getElementById("change");
    changeEl.innerText = `${s.change.toFixed(2)} (${s.change_percent}%)`;
    changeEl.className = s.change >= 0 ? "up" : "down";

    document.getElementById("prev").innerText = s.prev_close;
    document.getElementById("open").innerText = s.open;
    document.getElementById("high").innerText = s.high;
    document.getElementById("low").innerText = s.low;
    document.getElementById("close").innerText = s.price;
    document.getElementById("vwap").innerText = s.vwap;

    document.getElementById("nifty").innerText =
      data.index.nifty ? data.index.nifty.toFixed(2) : "N/A";

    document.getElementById("sensex").innerText =
      data.index.sensex ? data.index.sensex.toFixed(2) : "N/A";

  } catch (err) {
    console.error(err);
    document.getElementById("symbol").innerText = "WAITING FOR DATA…";
  }
}

setInterval(loadData, 3000);
loadData();
</script>

</body>
</html> -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Connplex LED</title>

  <style>
    body {
      margin: 0;
      width: 240px;
      height: 80px;
      background: black;
      color: white;
      font-family: Consolas, monospace;
      overflow: hidden;
    }

    .wrapper {
      width: 240px;
      height: 80px;
      padding: 2px;
      box-sizing: border-box;
    }

    /* SYMBOL */
    #symbol {
      font-size: 10px;
      text-align: center;
      letter-spacing: 1px;
      margin-bottom: 2px;
    }

    /* PRICE ROW */
    .price-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
    }

    #price {
      font-size: 22px;
      font-weight: bold;
      color: #00ff66;
    }

    #change {
      font-size: 12px;
      font-weight: bold;
    }

    .up { color: #00ff66; }
    .down { color: #ff3333; }

    /* STATS */
    .stats {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 9px;
      color: #00e5ff;
    }

    .stat {
      text-align: center;
      width: 30px;
    }

    .label {
      color: #888;
      font-size: 8px;
      display: block;
    }
  </style>
</head>

<body>

<div class="wrapper">

  <div id="symbol">CONNPLEX</div>

  <div class="price-row">
    <div id="price">₹---</div>
    <div id="change">--</div>
  </div>

  <div class="stats">
    <div class="stat"><span class="label">O</span><span id="open">--</span></div>
    <div class="stat"><span class="label">H</span><span id="high">--</span></div>
    <div class="stat"><span class="label">L</span><span id="low">--</span></div>
    <div class="stat"><span class="label">V</span><span id="vwap">--</span></div>
    <div class="stat"><span class="label">N</span><span id="nifty">--</span></div>
    <div class="stat"><span class="label">S</span><span id="sensex">--</span></div>
  </div>

</div>

<script>
const API_URL = "https://connplex-activeled.onrender.com/data";

async function loadData() {
  try {
    const res = await fetch(API_URL, { cache: "no-store" });
    if (!res.ok) throw new Error("API error");

    const data = await res.json();
    const s = data.stock;

    document.getElementById("symbol").innerText = "CONNPLEX";
    document.getElementById("price").innerText = "₹" + s.price.toFixed(0);

    const ch = document.getElementById("change");
    ch.innerText = s.change.toFixed(1);
    ch.className = s.change >= 0 ? "up" : "down";

    document.getElementById("open").innerText = s.open.toFixed(0);
    document.getElementById("high").innerText = s.high.toFixed(0);
    document.getElementById("low").innerText = s.low.toFixed(0);
    document.getElementById("vwap").innerText = s.vwap.toFixed(0);

    document.getElementById("nifty").innerText =
      data.index.nifty ? data.index.nifty.toFixed(0) : "--";

    document.getElementById("sensex").innerText =
      data.index.sensex ? data.index.sensex.toFixed(0) : "--";

  } catch (e) {
    document.getElementById("symbol").innerText = "WAIT...";
  }
}

setInterval(loadData, 3000);
loadData();
</script>

</body>
</html>
