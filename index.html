<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Connplex Stock LED</title>

  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
    }

    * {
      font-weight: 900;
      -webkit-font-smoothing: none;
      text-rendering: geometricPrecision;
    }

    body {
      background: black;
      font-family: "Consolas", "Courier New", monospace;
      text-align: center;
      color: white;
    }

    .container {
      padding-top: 4vh;
    }

    /* ðŸ”¶ Company Name (FIXED COLOR) */
    #symbol {
      font-size: 9vh;
      letter-spacing: 0.4vh;
      margin-bottom: 2vh;
      color: #E6A64B;   /* GOLD / YELLOW */
    }

    /* Brand row: logo + company name */
    .brand {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5vh;
      margin-bottom: 1vh;
    }

    #logo {
      height: 9vh;
      width: auto;
      object-fit: contain;
      -webkit-user-drag: none;
      user-select: none;
    }

    /* Responsive tweaks */
    @media (max-width: 600px) {
      #logo { height: 6vh; }
      #symbol { font-size: 6vh; }
      #price { font-size: 12vh; }
      #change { font-size: 5vh; }
    }

    /* Price row */
    .price-row {
      display: flex;
      justify-content: center;
      align-items: baseline;
      gap: 3vw;
    }

    #price {
      font-size: 18vh;
      color: #00ff66;
    }

    #change {
      font-size: 9vh;
    }

    .up { color: #00ff66; }
    .down { color: #ff3333; }

    /* Stats row */
    .stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 2vw;
      margin-top: 4vh;
      padding: 0 5%;
      flex-wrap: nowrap;
    }

    .stat {
      flex: 1;
      text-align: center;
    }

    .stat-label {
      font-size: 4.5vh;
      color: #888;
      margin-bottom: 0.5vh;
    }

    .stat-value {
      font-size: 9vh;
      color: white;
    }

    #time {
      margin-top: 3vh;
      font-size: 4vh;
      color: #777;
    }
  </style>
</head>

<body>

  <div class="container">

    <div class="brand">
      <!-- <img id="logo" src="connplex_logo.jpg" alt="Connplex logo" /> -->
      <div id="symbol">LOADINGâ€¦</div>
    </div>

    <div class="price-row">
      <div id="price">â‚¹0.00</div>
      <div id="change">--</div>
    </div>

    <div class="stats">
      <div class="stat"><div class="stat-label">PRE</div><div id="prev" class="stat-value">--</div></div>
      <div class="stat"><div class="stat-label">OPEN</div><div id="open" class="stat-value">--</div></div>
      <div class="stat"><div class="stat-label">HIGH</div><div id="high" class="stat-value">--</div></div>
      <div class="stat"><div class="stat-label">LOW</div><div id="low" class="stat-value">--</div></div>
      <div class="stat"><div class="stat-label">CLOSE</div><div id="close" class="stat-value">--</div></div>
      <div class="stat"><div class="stat-label">VWAP</div><div id="vwap" class="stat-value">--</div></div>
      <!-- <div class="stat"><div class="stat-label">NIFTY 50</div><div id="nifty" class="stat-value">--</div></div>
      <div class="stat"><div class="stat-label">SENSEX</div><div id="sensex" class="stat-value">--</div></div> -->
    </div>

    <!-- <div id="time"></div> -->

  </div>

  <script>
    const API_URL = "https://connplex-activeled.onrender.com/data";

    async function loadData() {
      try {
        const res = await fetch(API_URL, { cache: "no-store" });
        if (!res.ok) throw new Error("API error");

        const data = await res.json();
        const s = data.stock;

        const symbolEl = document.getElementById("symbol");
        symbolEl.innerText = s.symbol;
        symbolEl.style.color = "#E6A64B"; // ðŸ”’ force gold always

        document.getElementById("price").innerText =
          "â‚¹" + s.price.toFixed(2);

        const changeEl = document.getElementById("change");
        changeEl.innerText = `${s.change.toFixed(2)} (${s.change_percent}%)`;
        changeEl.className = s.change >= 0 ? "up" : "down";

        document.getElementById("prev").innerText = s.prev_close;
        document.getElementById("open").innerText = s.open;
        document.getElementById("high").innerText = s.high;
        document.getElementById("low").innerText = s.low;
        document.getElementById("close").innerText = s.price;
        document.getElementById("vwap").innerText = s.vwap;

        // document.getElementById("nifty").innerText =
        //   data.index.nifty ? data.index.nifty.toFixed(2) : "N/A";

        // document.getElementById("sensex").innerText =
        //   data.index.sensex ? data.index.sensex.toFixed(2) : "N/A";

        // document.getElementById("time").innerText =
        //   new Date().toLocaleString("en-IN", {
        //     day: "2-digit",
        //     month: "short",
        //     year: "numeric",
        //     hour: "2-digit",
        //     minute: "2-digit",
        //     second: "2-digit"
        //   }) + " IST";

      } catch (err) {
        console.error(err);
        const symbolEl = document.getElementById("symbol");
        symbolEl.innerText = "WAITING FOR DATAâ€¦";
        symbolEl.style.color = "#E6A64B";
      }
    }

    setInterval(loadData, 3000);
    loadData();
  </script>

</body>
</html>
